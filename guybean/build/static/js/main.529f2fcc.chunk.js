(this.webpackJsonpguybean=this.webpackJsonpguybean||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(22),c=n.n(s),i=(n(28),n(17)),o=n(4),u=n(5),l=n(7),h=n(6),j=(n(29),n(16)),d=n(2),b=(n(30),n(31),n(0)),p=(r.a.Component,function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(b.jsx)("main",{className:"NewOrderPage",children:Object(b.jsx)("nav",{className:"nav",children:Object(b.jsx)("h1",{children:"Add Restaurant"})})})}}]),n}(r.a.Component)),O=n(11),f=n.n(O),m=n(14),v=(n(34),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={orderHistory:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),e.next=4,fetch("/api/orders",{headers:{Authorization:"Bearer "+t}});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,this.setState({orderHistory:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("ERROR:",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(b.jsxs)("main",{className:"OrderHistoryPage",children:[Object(b.jsx)("nav",{children:Object(b.jsx)("h1",{children:"My Restaurants"})}),Object(b.jsx)("div",{})]})}}]),n}(r.a.Component)),x=(n(35),n(12)),g=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",error:""},e.handleChange=function(t){var n;e.setState((n={},Object(x.a)(n,t.target.name,t.target.value),Object(x.a)(n,"error",""),n))},e.handleSubmit=function(){var t=Object(m.a)(f.a.mark((function t(n){var a,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})});case 4:if((a=t.sent).ok){t.next=7;break}throw new Error("Fetch failed - Bad request");case 7:return t.next=9,a.json();case 9:r=t.sent,localStorage.setItem("token",r),s=JSON.parse(atob(r.split(".")[1])).user,e.props.setUserInState(s),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.log("SignupForm error",t.t0),e.setState({error:"Sign Up Failed - Try Again"});case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"form-container",onSubmit:this.handleSubmit,children:Object(b.jsxs)("form",{autoComplete:"off",children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"text",name:"email",value:this.state.email,onChange:this.handleChange,required:!0}),Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0}),Object(b.jsx)("button",{type:"submit",children:"LOG IN"})]})}),Object(b.jsxs)("p",{className:"error-message",children:["\xa0",this.state.error]})]})}}]),n}(a.Component),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",password:"",confirm:"",error:""},e.handleChange=function(t){var n;e.setState((n={},Object(x.a)(n,t.target.name,t.target.value),Object(x.a)(n,"error",""),n))},e.handleSubmit=function(){var t=Object(m.a)(f.a.mark((function t(n){var a,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.state.name,email:e.state.email,password:e.state.password})});case 4:if((a=t.sent).ok){t.next=7;break}throw new Error("Fetch failed - Bad request");case 7:return t.next=9,a.json();case 9:r=t.sent,localStorage.setItem("token",r),s=JSON.parse(atob(r.split(".")[1])).user,e.props.setUserInState(s),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.log("SignupForm error",t.t0),e.setState({error:"Sign Up Failed - Try Again"});case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.password!==this.state.confirm;return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"form-container",children:Object(b.jsxs)("form",{autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(b.jsx)("label",{children:"Name"}),Object(b.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange,required:!0}),Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0}),Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0}),Object(b.jsx)("label",{children:"Confirm"}),Object(b.jsx)("input",{type:"password",name:"confirm",value:this.state.confirm,onChange:this.handleChange,required:!0}),Object(b.jsx)("button",{type:"submit",disabled:e,children:"SIGN UP"})]})}),Object(b.jsxs)("p",{className:"error-message",children:["\xa0",this.state.error]})]})}}]),n}(a.Component),S=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showLogin:!0},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("main",{className:"AuthPage",children:[Object(b.jsx)("div",{children:Object(b.jsx)("h3",{onClick:function(){return e.setState({showLogin:!e.state.showLogin})},children:this.state.showLogin?"SIGN UP":"LOG IN"})}),this.state.showLogin?Object(b.jsx)(g,{setUserInState:this.props.setUserInState}):Object(b.jsx)(y,{setUserInState:this.props.setUserInState})]})}}]),n}(r.a.Component),w=(n(36),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"Index",children:Object(b.jsx)("h1",{children:"Index"})})}}]),n}(r.a.Component)),C=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.setUserInState=function(t){e.setState({user:t})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");if(e){var t=JSON.parse(atob(e.split(".")[1])).user;this.setState({user:t})}}},{key:"render",value:function(){return Object(b.jsx)("main",{className:"App",children:this.state.user?Object(b.jsx)(j.a,{children:Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{path:"/addRestaurant",render:function(e){return Object(b.jsx)(p,Object(i.a)({},e))}}),Object(b.jsx)(d.a,{path:"/orders",render:function(e){return Object(b.jsx)(v,Object(i.a)({},e))}}),Object(b.jsx)(d.a,{path:"/",render:function(e){return Object(b.jsx)(w,Object(i.a)({},e))}})]})}):Object(b.jsx)(S,{setUserInState:this.setUserInState})})}}]),n}(r.a.Component),k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(C,{})}),document.getElementById("root")),k()}},[[45,1,2]]]);
//# sourceMappingURL=main.529f2fcc.chunk.js.map